---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import Hero3 from '../../components/Hero3.astro';
import Footer from '../../components/Footer.astro';

import { getAllPosts } from '../../sanity/api';
import { urlForImage } from '../../sanity/urlForImage.js';

export async function getStaticPaths() {
  const allBlogPosts = await getAllPosts();

  return allBlogPosts.map((post) => ({
    params: { slug: post.slug.current },
    props: { post },
  }));
}

const { post } = Astro.props;
---

<Layout>
  <Navigation />
  <Hero3 heading={post.title} imageSrc={urlForImage(post.mainImage).url()} />
  <ul class="grid-3-col">
    {
      //eslint-disable-next-line @typescript-eslint/no-explicit-any
      post.images.map((image: any) => (
        <li>
          <img src={urlForImage(image).url()} alt="" />
        </li>
      ))
    }
    <li></li>
  </ul>
  <Footer />
</Layout>

<style lang="scss">
  @import '../../../styles/sass/base/mixins';

  img {
    width: 100%;
    height: 264px;
    object-fit: cover;

    @include breakpoint(mobile) {
      height: 200px;
    }
  }
</style>
